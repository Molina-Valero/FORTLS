<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimize Plot Design Based on Optimal Correlations — optimize.plot.design • FORTLS</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimize Plot Design Based on Optimal Correlations — optimize.plot.design"><meta name="description" content="Generation of interactive heatmaps graphically represent the optimal
correlations between variables estimated from field data, and metrics
derived from TLS data. These data must be derived from any of the three different
plot designs currently available (circular fixed area, k-tree and angle-count) and
correspond to plots with incremental values for the plot design parameter
(radius, k and BAF, respectively). In addition, correlation measures that are currently
admissible are Pearson's correlation coefficient and/or Spearman's rho."><meta property="og:description" content="Generation of interactive heatmaps graphically represent the optimal
correlations between variables estimated from field data, and metrics
derived from TLS data. These data must be derived from any of the three different
plot designs currently available (circular fixed area, k-tree and angle-count) and
correspond to plots with incremental values for the plot design parameter
(radius, k and BAF, respectively). In addition, correlation measures that are currently
admissible are Pearson's correlation coefficient and/or Spearman's rho."><meta property="og:image" content="https://molina-valero.github.io/FORTLS/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FORTLS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/plot_design_optimization.html">Plot design optimization</a></li>
    <li><a class="dropdown-item" href="../articles/stand_level.html">Stand-level variables</a></li>
    <li><a class="dropdown-item" href="../articles/tree_level.html">Tree-level variables</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Molina-Valero/FORTLS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Optimize Plot Design Based on Optimal Correlations</h1>

      <div class="d-none name"><code>optimize.plot.design.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generation of interactive heatmaps graphically represent the optimal
correlations between variables estimated from field data, and metrics
derived from TLS data. These data must be derived from any of the three different
plot designs currently available (circular fixed area, k-tree and angle-count) and
correspond to plots with incremental values for the plot design parameter
(radius, k and BAF, respectively). In addition, correlation measures that are currently
admissible are Pearson's correlation coefficient and/or Spearman's <em>rho</em>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">optimize.plot.design</span><span class="op">(</span><span class="va">correlations</span>,</span>
<span>                     variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"G"</span>, <span class="st">"d"</span>, <span class="st">"dg"</span>, <span class="st">"d.0"</span>, <span class="st">"h"</span>, <span class="st">"h.0"</span><span class="op">)</span>,</span>
<span>                     dir.result <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<p></p>
<dl><dt id="arg-correlations">correlations<a class="anchor" aria-label="anchor" href="#arg-correlations"></a></dt>
<dd><p>List including the optimal correlations between field estimations and TLS
  metrics. The structure and format must be analogous to the
  <code>opt.correlations</code> element in the output returned by the
  <code><a href="correlations.html">correlations</a></code> function. In particular, the list must include at least one
  of the following named elements:</p><ul><li><p><code>pearson</code>: list containing the optimal Pearson's correlations,
      and the names of the TLS metrics to which they correspond. It must include
      at least one of the following named elements:</p><ul><li><p><code>fixed.area.plot</code>: data frame containing the optimal
          Pearson's correlations, and the names of the TLS metrics to which
          they correspond, under circular fixed area plot design. Each row will
          correspond to a radius value, and the data frame will include the following columns:</p><ul><li><p><code>radius</code>: radius (m) of the simulated plots used for
              computing the estimated correlations.</p></li>
<li><p>Columns ‘<code>&lt;x&gt;.cor</code>’ and
              ‘<code>&lt;x&gt;.metric</code>’: the former, numeric column(s)
              containing optimal Pearson's correlations between
              ‘<code>&lt;x&gt;</code>’, a field estimate, and the available TLS
              metrics when <code><a href="correlations.html">correlations</a></code> function was executed;
              and the latter, character column(s) containing names of the TLS
              metrics to which they correspond.</p></li>
</ul><p>If <code>fixed.area.plot</code> is included in <code>pearson</code> element, it
          must contain at least the <code>radius</code> column and a
          (‘<code>&lt;x&gt;.cor</code>’, ‘<code>&lt;x&gt;.metric</code>’) pair of
          columns corresponding to the same field estimation.</p></li>
<li><p><code>k.tree.plot</code>: data frame including the optimal Pearson's
          correlations and the names of the TLS metrics to which they
          correspond, under the k-tree plot design. Each row will
          correspond to a k value, and the following columns will be included:</p><ul><li><p><code>k</code>: number of trees (trees) of the simulated plots
              used for computing the estimated correlations.</p></li>
<li><p>Columns ‘<code>&lt;x&gt;.cor</code>’ and
              ‘<code>&lt;x&gt;.metric</code>’: same description and format as
              indicated in <code>correlations$pearson$fixed.area.plot</code> element.</p></li>
</ul><p>If <code>k.tree.plot</code> is included in <code>pearson</code> element, it must
          contain at least <code>k</code> column, and a (‘<code>&lt;x&gt;.cor</code>’,
          ‘<code>&lt;x&gt;.metric</code>’) pair of columns corresponding to the same
          field estimation.</p></li>
<li><p><code>angle.count.plot</code>: data frame including the optimal
          Pearson's correlations and the names of the TLS metrics to which
          they correspond, for the angle-count plot design. Each row will
          correspond to a BAF value, and the data frame will include the following columns:</p><ul><li><p><code>BAF</code>: BAF (\({m}^{2}/ha\)) of the simulated plots used to
              compute the estimated correlations.</p></li>
<li><p>Columns ‘<code>&lt;x&gt;.cor</code>’ and
              ‘<code>&lt;x&gt;.metric</code>’: same description and format as
              indicated in <code>correlations$pearson$fixed.area.plot</code> element.</p></li>
</ul><p>If the <code>angle.count.plot</code> is included in the <code>pearson</code> element, it
          must include at least the <code>BAF</code> column and a
          (‘<code>&lt;x&gt;.cor</code>’, ‘<code>&lt;x&gt;.metric</code>’) pair of columns
          corresponding to the same field estimation.</p></li>
</ul></li>
<li><p><code>spearman</code>: list containing the optimal Spearman's
      correlations, and the names of the TLS metrics to which they correspond.
      The structure and format will be analogous to that indicated for the
      previous element but with optimal Pearson's correlations replaced by
      Spearman's correlations.</p></li>
</ul><p></p></dd>


  <dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>Optional character vector naming field estimations whose optimal correlations
  will be represented graphically in the heatmaps generated during the
  execution. If this argument is specified by the user, it must include at
  least one of the following character strings: “<code>N</code>”,
  “<code>G</code>”, “<code>V</code>”, “<code>d</code>”, “<code>dg</code>”,
  “<code>dgeom</code>”, “<code>dharm</code>”, “<code>d.0</code>”,
  “<code>dg.0</code>”, “<code>dgeom.0</code>”, “<code>dharm.0</code>”,
  “<code>h</code>”, “<code>hg</code>”, “<code>hgeom</code>”,
  “<code>hharm</code>”, “<code>h.0</code>”, “<code>hg.0</code>”,
  “<code>hgeom.0</code>”, or “<code>hharm.0</code>”. If this argument is not
  specified by the user, it will be set to
  <code>c("N", "G", "V", "d", "dg", "d.0", "h", "h.0")</code> by default. In both
  cases, all data frames in the <code>correlations</code>
  argument must have at least the (‘<code>&lt;x&gt;.cor</code>’,
  ‘<code>&lt;x&gt;.metric</code>’) pairs corresponding to the field estimations
  specified in the <code>variables</code> argument.</p></dd>


  <dt id="arg-dir-result">dir.result<a class="anchor" aria-label="anchor" href="#arg-dir-result"></a></dt>
<dd><p>Optional character string naming the absolute path of an existing directory
  where files described in ‘Output Files’ section will be saved.
  <code>.Platform$file.sep</code> must be used as the path separator in
  <code>dir.result</code>. If this argument is not specified by the user, it will be set
  to <code>NULL</code> by default and, as consequence, the current working directory
  of the <span style="R">R</span> process will be assigned to <code>dir.result</code> during the execution.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function represents graphically, by means of interactive heatmaps, the strongest correlations (positive or negative) for each plot design and size simulated, between the
estimated variables based on field data specified in the <code>variables</code>
argument, and metrics derived from TLS data, under circular fixed area, k-tree and/or
angle-count plot designs.</p>
<p>Two correlation measures are implemented at present: Pearson’s correlation
coefficient and Spearman’s rho. Hence, only optimal correlations based on <code>correlations</code> arguments will be taken into account during the
execution.</p>
<p>For each correlation measure and plot design, at least one no missing value for optimal correlations must be represented;
otherwise, execution will be stopped, and an error message will appear. In
addition, at least two different no missing values for
optimal correlations are required to ensure that the colour palette is
correctly applied when the heatmap is generated.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisible <code>NULL</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="output-files">Output Files<a class="anchor" aria-label="anchor" href="#output-files"></a></h2>
    <p>During the execution, interactive heatmaps graphically representing optimal
correlations values between field estimations and TLS metrics are created and
saved in <code>dir.result</code> directory by means of the <a href="https://rdrr.io/pkg/htmlwidgets/man/saveWidget.html" class="external-link">saveWidget</a>
function in the <a href="https://CRAN.R-project.org/package=htmlwidgets" class="external-link"><span class="pkg">htmlwidgets</span></a> package. The widgets generated allow users
to consult optimal correlations values and TLS metrics to which they correspond
directly on the plots, to zoom and scroll, and so on. The pattern used for
naming these files is <code class="file">opt.correlations.&lt;plot design&gt;.&lt;method&gt;.html</code>,
where <code class="file">&lt;plot design&gt;</code> equals “<code>fixed.area.plot</code>”,
“<code>k.tree.plot</code>” or “<code>angle.count.plot</code>” according to
plot design, and <code class="file">&lt;method&gt;</code> equals “<code>pearson</code>” or
“<code>spearman</code>” according to correlation measure.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function is key to choosing the best possible plot design (in terms of
correlation measures) considering all variables of interest before establishing
definitive sampling design.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Juan Alberto Molina-Valero and
Adela Martínez-Calvo.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="correlations.html">correlations</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load field estimations and TLS metrics corresponding to Rioja data set</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Rioja.simulations"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute correlations between field estimations and TLS metrics corresponding</span></span></span>
<span class="r-in"><span><span class="co"># to Rioja example, and select optimal correlations results</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">corr</span> <span class="op">&lt;-</span> <span class="fu"><a href="correlations.html">correlations</a></span><span class="op">(</span>simulations <span class="op">=</span> <span class="va">Rioja.simulations</span>,</span></span>
<span class="r-in"><span>                     variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"G"</span>, <span class="st">"d"</span>, <span class="st">"dg"</span>, <span class="st">"dgeom"</span>,<span class="st">"dharm"</span>,</span></span>
<span class="r-in"><span>                                   <span class="st">"d.0"</span>, <span class="st">"dg.0"</span>, <span class="st">"dgeom.0"</span>, <span class="st">"dharm.0"</span>, <span class="st">"h"</span>,</span></span>
<span class="r-in"><span>                                   <span class="st">"hg"</span>, <span class="st">"hgeom"</span>, <span class="st">"hharm"</span>, <span class="st">"h.0"</span>, <span class="st">"hg.0"</span>,</span></span>
<span class="r-in"><span>                                   <span class="st">"hgeom.0"</span>, <span class="st">"hharm.0"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     save.result <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing correlations for fixed area plots</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  (366.09 secs)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing correlations for k-tree plots</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  (82.38 secs)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing correlations for angle-count plots</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  (63.43 secs)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">opt.corr</span> <span class="op">&lt;-</span> <span class="va">corr</span><span class="op">$</span><span class="va">opt.correlations</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Establish directory where optimal correlations heatmaps corresponding to Rioja</span></span></span>
<span class="r-in"><span><span class="co"># example will be saved. For instance, current working directory</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dir.result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate heatmaps for optimal correlations between field estimations and TLS</span></span></span>
<span class="r-in"><span><span class="co"># metrics corresponding to Rioja example</span></span></span>
<span class="r-in"><span><span class="co"># Optimal Pearson's and Spearman's correlations for variables by default</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># optimize.plot.design(correlations = opt.corr, dir.result = dir.result)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Optimal Pearson's and Spearman's correlations for variables 'N' and 'G'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">optimize.plot.design</span><span class="op">(</span>correlations <span class="op">=</span> <span class="va">opt.corr</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"G"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     dir.result <span class="op">=</span> <span class="va">dir.result</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting heatmap(s) for optimal Pearson's correlations </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  (5.31 secs)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting heatmap(s) for optimal Spearman's correlations </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  (5.86 secs)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Juan Alberto Molina-Valero, Adela Martínez-Calvo, María José Ginzo Villamayor, Juan Gabriel Álvarez-González, Fernando Montes, César Pérez-Cruzado.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

